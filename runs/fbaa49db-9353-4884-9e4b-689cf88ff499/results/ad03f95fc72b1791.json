{
  "arch_hash": "ad03f95fc72b1791",
  "run_id": "fbaa49db-9353-4884-9e4b-689cf88ff499",
  "status": "FAILED",
  "started_at": "2026-01-15T08:51:18.018555",
  "completed_at": "2026-01-15T08:51:50.392681",
  "duration_seconds": 32.374128,
  "terraform_apply": {
    "success": false,
    "resources_created": 0,
    "outputs": {},
    "logs": "Apply failed:\nSTDOUT: \u001b[0m\u001b[1mdata.archive_file.lambda_zip: Reading...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1mdata.archive_file.lambda_zip: Read complete after 0s [id=b6014d37ac447a0689cef34ed47f740e57ba0381]\u001b[0m\n\nTerraform used the selected providers to generate the following execution\nplan. Resource actions are indicated with the following symbols:\n  \u001b[32m+\u001b[0m create\u001b[0m\n\nTerraform will perform the following actions:\n\n\u001b[1m  # aws_apigatewayv2_api.http_lambda\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_apigatewayv2_api\" \"http_lambda\" {\n      \u001b[32m+\u001b[0m\u001b[0m api_endpoint                 = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m api_key_selection_expression = \"$request.header.x-api-key\"\n      \u001b[32m+\u001b[0m\u001b[0m arn                          = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m execution_arn                = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m id                           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m ip_address_type              = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name                         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m protocol_type                = \"HTTP\"\n      \u001b[32m+\u001b[0m\u001b[0m region                       = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m route_selection_expression   = \"$request.method $request.path\"\n      \u001b[32m+\u001b[0m\u001b[0m tags_all                     = (known after apply)\n    }\n\n\u001b[1m  # aws_apigatewayv2_integration.apigw_lambda\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_apigatewayv2_integration\" \"apigw_lambda\" {\n      \u001b[32m+\u001b[0m\u001b[0m api_id                                    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m connection_type                           = \"INTERNET\"\n      \u001b[32m+\u001b[0m\u001b[0m id                                        = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m integration_method                        = \"POST\"\n      \u001b[32m+\u001b[0m\u001b[0m integration_response_selection_expression = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m integration_type                          = \"AWS_PROXY\"\n      \u001b[32m+\u001b[0m\u001b[0m integration_uri                           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m payload_format_version                    = \"1.0\"\n      \u001b[32m+\u001b[0m\u001b[0m region                                    = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m timeout_milliseconds                      = (known after apply)\n    }\n\n\u001b[1m  # aws_apigatewayv2_route.post\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_apigatewayv2_route\" \"post\" {\n      \u001b[32m+\u001b[0m\u001b[0m api_id             = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m api_key_required   = false\n      \u001b[32m+\u001b[0m\u001b[0m authorization_type = \"NONE\"\n      \u001b[32m+\u001b[0m\u001b[0m id                 = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m region             = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m route_key          = \"POST /movies\"\n      \u001b[32m+\u001b[0m\u001b[0m target             = (known after apply)\n    }\n\n\u001b[1m  # aws_apigatewayv2_stage.default\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_apigatewayv2_stage\" \"default\" {\n      \u001b[32m+\u001b[0m\u001b[0m api_id        = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m arn           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m auto_deploy   = true\n      \u001b[32m+\u001b[0m\u001b[0m deployment_id = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m execution_arn = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m id            = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m invoke_url    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name          = \"$default\"\n      \u001b[32m+\u001b[0m\u001b[0m region        = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m tags_all      = (known after apply)\n\n      \u001b[32m+\u001b[0m\u001b[0m access_log_settings {\n          \u001b[32m+\u001b[0m\u001b[0m destination_arn = (known after apply)\n          \u001b[32m+\u001b[0m\u001b[0m format          = jsonencode(\n                {\n                  \u001b[32m+\u001b[0m\u001b[0m httpMethod              = \"$context.httpMethod\"\n                  \u001b[32m+\u001b[0m\u001b[0m integrationErrorMessage = \"$context.integrationErrorMessage\"\n                  \u001b[32m+\u001b[0m\u001b[0m protocol                = \"$context.protocol\"\n                  \u001b[32m+\u001b[0m\u001b[0m requestId               = \"$context.requestId\"\n                  \u001b[32m+\u001b[0m\u001b[0m requestTime             = \"$context.requestTime\"\n                  \u001b[32m+\u001b[0m\u001b[0m resourcePath            = \"$context.resourcePath\"\n                  \u001b[32m+\u001b[0m\u001b[0m responseLength          = \"$context.responseLength\"\n                  \u001b[32m+\u001b[0m\u001b[0m routeKey                = \"$context.routeKey\"\n                  \u001b[32m+\u001b[0m\u001b[0m sourceIp                = \"$context.identity.sourceIp\"\n                  \u001b[32m+\u001b[0m\u001b[0m status                  = \"$context.status\"\n                }\n            )\n        }\n    }\n\n\u001b[1m  # aws_cloudwatch_log_group.api_gw\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_cloudwatch_log_group\" \"api_gw\" {\n      \u001b[32m+\u001b[0m\u001b[0m arn                         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m deletion_protection_enabled = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m id                          = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m log_group_class             = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name                        = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name_prefix                 = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m region                      = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m retention_in_days           = 7\n      \u001b[32m+\u001b[0m\u001b[0m skip_destroy                = false\n      \u001b[32m+\u001b[0m\u001b[0m tags_all                    = (known after apply)\n    }\n\n\u001b[1m  # aws_cloudwatch_log_group.lambda_logs\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_cloudwatch_log_group\" \"lambda_logs\" {\n      \u001b[32m+\u001b[0m\u001b[0m arn                         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m deletion_protection_enabled = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m id                          = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m log_group_class             = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name                        = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name_prefix                 = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m region                      = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m retention_in_days           = 7\n      \u001b[32m+\u001b[0m\u001b[0m skip_destroy                = false\n      \u001b[32m+\u001b[0m\u001b[0m tags_all                    = (known after apply)\n    }\n\n\u001b[1m  # aws_dynamodb_table.movie_table\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_dynamodb_table\" \"movie_table\" {\n      \u001b[32m+\u001b[0m\u001b[0m arn              = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m billing_mode     = \"PROVISIONED\"\n      \u001b[32m+\u001b[0m\u001b[0m hash_key         = \"year\"\n      \u001b[32m+\u001b[0m\u001b[0m id               = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name             = \"Movies\"\n      \u001b[32m+\u001b[0m\u001b[0m range_key        = \"title\"\n      \u001b[32m+\u001b[0m\u001b[0m read_capacity    = 20\n      \u001b[32m+\u001b[0m\u001b[0m region           = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m stream_arn       = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m stream_label     = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m stream_view_type = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m tags_all         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m write_capacity   = 20\n\n      \u001b[32m+\u001b[0m\u001b[0m attribute {\n          \u001b[32m+\u001b[0m\u001b[0m name = \"title\"\n          \u001b[32m+\u001b[0m\u001b[0m type = \"S\"\n        }\n      \u001b[32m+\u001b[0m\u001b[0m attribute {\n          \u001b[32m+\u001b[0m\u001b[0m name = \"year\"\n          \u001b[32m+\u001b[0m\u001b[0m type = \"N\"\n        }\n    }\n\n\u001b[1m  # aws_iam_policy.lambda_exec_role\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_iam_policy\" \"lambda_exec_role\" {\n      \u001b[32m+\u001b[0m\u001b[0m arn              = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m attachment_count = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m id               = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name             = \"lambda-tf-pattern-ddb-post\"\n      \u001b[32m+\u001b[0m\u001b[0m name_prefix      = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m path             = \"/\"\n      \u001b[32m+\u001b[0m\u001b[0m policy           = jsonencode(\n            {\n              \u001b[32m+\u001b[0m\u001b[0m Statement = [\n                  \u001b[32m+\u001b[0m\u001b[0m {\n                      \u001b[32m+\u001b[0m\u001b[0m Action   = [\n                          \u001b[32m+\u001b[0m\u001b[0m \"dynamodb:GetItem\",\n                          \u001b[32m+\u001b[0m\u001b[0m \"dynamodb:PutItem\",\n                          \u001b[32m+\u001b[0m\u001b[0m \"dynamodb:UpdateItem\",\n                        ]\n                      \u001b[32m+\u001b[0m\u001b[0m Effect   = \"Allow\"\n                      \u001b[32m+\u001b[0m\u001b[0m Resource = \"arn:aws:dynamodb:*:*:table/Movies\"\n                    },\n                  \u001b[32m+\u001b[0m\u001b[0m {\n                      \u001b[32m+\u001b[0m\u001b[0m Action   = [\n                          \u001b[32m+\u001b[0m\u001b[0m \"logs:CreateLogGroup\",\n                          \u001b[32m+\u001b[0m\u001b[0m \"logs:CreateLogStream\",\n                          \u001b[32m+\u001b[0m\u001b[0m \"logs:PutLogEvents\",\n                        ]\n                      \u001b[32m+\u001b[0m\u001b[0m Effect   = \"Allow\"\n                      \u001b[32m+\u001b[0m\u001b[0m Resource = \"*\"\n                    },\n                ]\n              \u001b[32m+\u001b[0m\u001b[0m Version   = \"2012-10-17\"\n            }\n        )\n      \u001b[32m+\u001b[0m\u001b[0m policy_id        = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m tags_all         = (known after apply)\n    }\n\n\u001b[1m  # aws_iam_role.lambda_exec\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_iam_role\" \"lambda_exec\" {\n      \u001b[32m+\u001b[0m\u001b[0m arn                   = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m assume_role_policy    = jsonencode(\n            {\n              \u001b[32m+\u001b[0m\u001b[0m Statement = [\n                  \u001b[32m+\u001b[0m\u001b[0m {\n                      \u001b[32m+\u001b[0m\u001b[0m Action    = \"sts:AssumeRole\"\n                      \u001b[32m+\u001b[0m\u001b[0m Effect    = \"Allow\"\n                      \u001b[32m+\u001b[0m\u001b[0m Principal = {\n                          \u001b[32m+\u001b[0m\u001b[0m Service = \"lambda.amazonaws.com\"\n                        }\n                      \u001b[32m+\u001b[0m\u001b[0m Sid       = \"\"\n                    },\n                ]\n              \u001b[32m+\u001b[0m\u001b[0m Version   = \"2012-10-17\"\n            }\n        )\n      \u001b[32m+\u001b[0m\u001b[0m create_date           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m force_detach_policies = false\n      \u001b[32m+\u001b[0m\u001b[0m id                    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m managed_policy_arns   = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m max_session_duration  = 3600\n      \u001b[32m+\u001b[0m\u001b[0m name                  = \"LambdaDdbPost\"\n      \u001b[32m+\u001b[0m\u001b[0m name_prefix           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m path                  = \"/\"\n      \u001b[32m+\u001b[0m\u001b[0m tags_all              = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m unique_id             = (known after apply)\n    }\n\n\u001b[1m  # aws_iam_role_policy_attachment.lambda_policy\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_iam_role_policy_attachment\" \"lambda_policy\" {\n      \u001b[32m+\u001b[0m\u001b[0m id         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m policy_arn = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m role       = \"LambdaDdbPost\"\n    }\n\n\u001b[1m  # aws_lambda_function.apigw_lambda_ddb\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_lambda_function\" \"apigw_lambda_ddb\" {\n      \u001b[32m+\u001b[0m\u001b[0m architectures                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m arn                            = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m code_sha256                    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m description                    = \"serverlessland pattern\"\n      \u001b[32m+\u001b[0m\u001b[0m function_name                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m handler                        = \"app.lambda_handler\"\n      \u001b[32m+\u001b[0m\u001b[0m id                             = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m invoke_arn                     = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m last_modified                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m memory_size                    = 128\n      \u001b[32m+\u001b[0m\u001b[0m package_type                   = \"Zip\"\n      \u001b[32m+\u001b[0m\u001b[0m publish                        = false\n      \u001b[32m+\u001b[0m\u001b[0m qualified_arn                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m qualified_invoke_arn           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m region                         = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m reserved_concurrent_executions = -1\n      \u001b[32m+\u001b[0m\u001b[0m response_streaming_invoke_arn  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m role                           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m runtime                        = \"python3.14\"\n      \u001b[32m+\u001b[0m\u001b[0m s3_bucket                      = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m s3_key                         = \"src.zip\"\n      \u001b[32m+\u001b[0m\u001b[0m signing_job_arn                = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m signing_profile_version_arn    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m skip_destroy                   = false\n      \u001b[32m+\u001b[0m\u001b[0m source_code_hash               = \"XFSsPWNxmU8LUiofQVmvljvIxktb6M0fg1Hjpz6SuF0=\"\n      \u001b[32m+\u001b[0m\u001b[0m source_code_size               = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m tags_all                       = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m timeout                        = 3\n      \u001b[32m+\u001b[0m\u001b[0m version                        = (known after apply)\n\n      \u001b[32m+\u001b[0m\u001b[0m environment {\n          \u001b[32m+\u001b[0m\u001b[0m variables = {\n              \u001b[32m+\u001b[0m\u001b[0m \"DDB_TABLE\" = \"Movies\"\n            }\n        }\n    }\n\n\u001b[1m  # aws_lambda_permission.api_gw\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_lambda_permission\" \"api_gw\" {\n      \u001b[32m+\u001b[0m\u001b[0m action              = \"lambda:InvokeFunction\"\n      \u001b[32m+\u001b[0m\u001b[0m function_name       = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m id                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m principal           = \"apigateway.amazonaws.com\"\n      \u001b[32m+\u001b[0m\u001b[0m region              = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m source_arn          = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m statement_id        = \"AllowExecutionFromAPIGateway\"\n      \u001b[32m+\u001b[0m\u001b[0m statement_id_prefix = (known after apply)\n    }\n\n\u001b[1m  # aws_s3_bucket.lambda_bucket\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_s3_bucket\" \"lambda_bucket\" {\n      \u001b[32m+\u001b[0m\u001b[0m acceleration_status         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m acl                         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m arn                         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m bucket                      = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m bucket_domain_name          = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m bucket_prefix               = \"apigw-lambda-ddb\"\n      \u001b[32m+\u001b[0m\u001b[0m bucket_region               = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m bucket_regional_domain_name = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m force_destroy               = true\n      \u001b[32m+\u001b[0m\u001b[0m hosted_zone_id              = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m id                          = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m object_lock_enabled         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m policy                      = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m region                      = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m request_payer               = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m tags_all                    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m website_domain              = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m website_endpoint            = (known after apply)\n    }\n\n\u001b[1m  # aws_s3_bucket_public_access_block.private_bucket\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_s3_bucket_public_access_block\" \"private_bucket\" {\n      \u001b[32m+\u001b[0m\u001b[0m block_public_acls       = true\n      \u001b[32m+\u001b[0m\u001b[0m block_public_policy     = true\n      \u001b[32m+\u001b[0m\u001b[0m bucket                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m id                      = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m ignore_public_acls      = true\n      \u001b[32m+\u001b[0m\u001b[0m region                  = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m restrict_public_buckets = true\n    }\n\n\u001b[1m  # aws_s3_object.this\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_s3_object\" \"this\" {\n      \u001b[32m+\u001b[0m\u001b[0m acl                    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m arn                    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m bucket                 = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m bucket_key_enabled     = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m checksum_crc32         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m checksum_crc32c        = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m checksum_crc64nvme     = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m checksum_sha1          = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m checksum_sha256        = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m content_type           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m etag                   = \"7976e30255a562327070f3ecb305175f\"\n      \u001b[32m+\u001b[0m\u001b[0m force_destroy          = false\n      \u001b[32m+\u001b[0m\u001b[0m id                     = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m key                    = \"src.zip\"\n      \u001b[32m+\u001b[0m\u001b[0m kms_key_id             = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m region                 = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m server_side_encryption = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m source                 = \"./src.zip\"\n      \u001b[32m+\u001b[0m\u001b[0m storage_class          = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m tags_all               = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m version_id             = (known after apply)\n    }\n\n\u001b[1m  # random_string.random\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"random_string\" \"random\" {\n      \u001b[32m+\u001b[0m\u001b[0m id          = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m length      = 4\n      \u001b[32m+\u001b[0m\u001b[0m lower       = true\n      \u001b[32m+\u001b[0m\u001b[0m min_lower   = 0\n      \u001b[32m+\u001b[0m\u001b[0m min_numeric = 0\n      \u001b[32m+\u001b[0m\u001b[0m min_special = 0\n      \u001b[32m+\u001b[0m\u001b[0m min_upper   = 0\n      \u001b[32m+\u001b[0m\u001b[0m number      = true\n      \u001b[32m+\u001b[0m\u001b[0m result      = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m special     = false\n      \u001b[32m+\u001b[0m\u001b[0m upper       = true\n    }\n\n\u001b[1mPlan:\u001b[0m 16 to add, 0 to change, 0 to destroy.\n\u001b[0m\nChanges to Outputs:\n  \u001b[32m+\u001b[0m\u001b[0m apigwy_log_group = (known after apply)\n  \u001b[32m+\u001b[0m\u001b[0m apigwy_url       = (known after apply)\n  \u001b[32m+\u001b[0m\u001b[0m lambda_log_group = (known after apply)\n\u001b[0m\u001b[1mrandom_string.random: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1mrandom_string.random: Creation complete after 0s [id=Aoat]\u001b[0m\n\u001b[0m\u001b[1maws_iam_policy.lambda_exec_role: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_cloudwatch_log_group.api_gw: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_apigatewayv2_api.http_lambda: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_iam_role.lambda_exec: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_cloudwatch_log_group.lambda_logs: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_s3_bucket.lambda_bucket: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_dynamodb_table.movie_table: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_iam_policy.lambda_exec_role: Creation complete after 0s [id=arn:aws:iam::000000000000:policy/lambda-tf-pattern-ddb-post]\u001b[0m\n\u001b[0m\u001b[1maws_iam_role.lambda_exec: Creation complete after 0s [id=LambdaDdbPost]\u001b[0m\n\u001b[0m\u001b[1maws_iam_role_policy_attachment.lambda_policy: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_iam_role_policy_attachment.lambda_policy: Creation complete after 0s [id=LambdaDdbPost/arn:aws:iam::000000000000:policy/lambda-tf-pattern-ddb-post]\u001b[0m\n\u001b[0m\u001b[1maws_cloudwatch_log_group.api_gw: Creation complete after 0s [id=/aws/api_gw/apigw-http-lambda-Aoat]\u001b[0m\n\u001b[0m\u001b[1maws_cloudwatch_log_group.lambda_logs: Creation complete after 0s [id=/aws/lambda/pattern-movies-post-Aoat]\u001b[0m\n\u001b[0m\u001b[1maws_s3_bucket.lambda_bucket: Creation complete after 0s [id=apigw-lambda-ddb20260115085137638900000001]\u001b[0m\n\u001b[0m\u001b[1maws_s3_bucket_public_access_block.private_bucket: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_s3_object.this: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_s3_bucket_public_access_block.private_bucket: Creation complete after 0s [id=apigw-lambda-ddb20260115085137638900000001]\u001b[0m\n\u001b[0m\u001b[1maws_s3_object.this: Creation complete after 0s [id=apigw-lambda-ddb20260115085137638900000001/src.zip]\u001b[0m\n\u001b[0m\u001b[1maws_lambda_function.apigw_lambda_ddb: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_dynamodb_table.movie_table: Creation complete after 1s [id=Movies]\u001b[0m\n\u001b[0m\u001b[1maws_lambda_function.apigw_lambda_ddb: Still creating... [10s elapsed]\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_lambda_function.apigw_lambda_ddb: Creation complete after 12s [id=pattern-movies-post-Aoat]\u001b[0m\n\u001b[31m\u2577\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[1m\u001b[31mError: \u001b[0m\u001b[0m\u001b[1mcreating API Gateway v2 API (apigw-http-lambda-Aoat): operation error ApiGatewayV2: CreateApi, https response error StatusCode: 501, RequestID: 487d9990-84dd-4ac8-b46c-29f63046782a, api error InternalFailure: The API for service apigatewayv2 is either not included in your current license plan or has not yet been emulated by LocalStack.\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[0m  with aws_apigatewayv2_api.http_lambda,\n\u001b[31m\u2502\u001b[0m \u001b[0m  on main.tf line 169, in resource \"aws_apigatewayv2_api\" \"http_lambda\":\n\u001b[31m\u2502\u001b[0m \u001b[0m 169: resource \"aws_apigatewayv2_api\" \"http_lambda\" \u001b[4m{\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2575\u001b[0m\u001b[0m\n::error::Terraform exited with code 1.\n\nSTDERR: "
  },
  "pytest_results": null,
  "container_logs": "etPolicy)\n2026-01-15T08:51:38.203  INFO --- [et.reactor-0] localstack.request.aws     : AWS s3.GetBucketAcl => 200\n2026-01-15T08:51:38.206  INFO --- [et.reactor-4] localstack.request.aws     : AWS s3.GetBucketCors => 404 (NoSuchCORSConfiguration)\n2026-01-15T08:51:38.209  INFO --- [et.reactor-1] localstack.request.aws     : AWS s3.GetBucketWebsite => 404 (NoSuchWebsiteConfiguration)\n2026-01-15T08:51:38.212  INFO --- [et.reactor-0] localstack.request.aws     : AWS s3.GetBucketVersioning => 200\n2026-01-15T08:51:38.217  INFO --- [et.reactor-4] localstack.request.aws     : AWS s3.GetBucketAccelerateConfiguration => 200\n2026-01-15T08:51:38.221  INFO --- [et.reactor-1] localstack.request.aws     : AWS s3.GetBucketRequestPayment => 200\n2026-01-15T08:51:38.223  INFO --- [et.reactor-0] localstack.request.aws     : AWS s3.GetBucketLogging => 200\n2026-01-15T08:51:38.226  INFO --- [et.reactor-4] localstack.request.aws     : AWS s3.GetBucketLifecycleConfiguration => 404 (NoSuchLifecycleConfiguration)\n2026-01-15T08:51:38.231  INFO --- [et.reactor-1] localstack.request.aws     : AWS s3.GetBucketReplication => 404 (ReplicationConfigurationNotFoundError)\n2026-01-15T08:51:38.233  INFO --- [et.reactor-0] localstack.request.aws     : AWS s3.GetBucketEncryption => 200\n2026-01-15T08:51:38.237  INFO --- [et.reactor-4] localstack.request.aws     : AWS s3.GetObjectLockConfiguration => 404 (ObjectLockConfigurationNotFoundError)\n2026-01-15T08:51:38.240  INFO --- [et.reactor-1] localstack.request.aws     : AWS s3.HeadBucket => 200\n2026-01-15T08:51:38.312  INFO --- [et.reactor-2] localstack.request.aws     : AWS dynamodb.CreateTable => 200\n2026-01-15T08:51:38.343  INFO --- [et.reactor-2] localstack.request.aws     : AWS dynamodb.DescribeTable => 200\n2026-01-15T08:51:38.385  INFO --- [et.reactor-6] localstack.request.aws     : AWS logs.ListTagsForResource => 200\n2026-01-15T08:51:38.386  INFO --- [et.reactor-5] localstack.request.aws     : AWS logs.ListTagsForResource => 200\n2026-01-15T08:51:38.389  INFO --- [et.reactor-0] localstack.request.aws     : AWS s3control.ListTagsForResource => 200\n2026-01-15T08:51:38.398  INFO --- [et.reactor-1] localstack.request.aws     : AWS s3.PutPublicAccessBlock => 200\n2026-01-15T08:51:38.399  INFO --- [et.reactor-3] l.aws.handlers.service     : The API for service apigatewayv2 is either not included in your current license plan or has not yet been emulated by LocalStack.\n2026-01-15T08:51:38.401  INFO --- [et.reactor-3] localstack.request.aws     : AWS apigatewayv2.CreateApi => 501 (InternalFailure)\n2026-01-15T08:51:38.404  INFO --- [et.reactor-5] localstack.request.aws     : AWS s3.PutObject => 200\n2026-01-15T08:51:38.406  INFO --- [et.reactor-6] localstack.request.aws     : AWS s3.GetPublicAccessBlock => 200\n2026-01-15T08:51:38.407  INFO --- [et.reactor-0] localstack.request.aws     : AWS s3.HeadObject => 200\n2026-01-15T08:51:38.409  INFO --- [et.reactor-3] localstack.request.aws     : AWS s3.GetObjectTagging => 200\n2026-01-15T08:51:38.410  INFO --- [et.reactor-4] localstack.request.aws     : AWS s3.GetPublicAccessBlock => 200\n2026-01-15T08:51:38.698  INFO --- [et.reactor-2] localstack.request.aws     : AWS lambda.CreateFunction => 201\n2026-01-15T08:51:39.041  INFO --- [et.reactor-4] localstack.request.aws     : AWS lambda.GetFunction => 200\n2026-01-15T08:51:39.363  INFO --- [et.reactor-5] localstack.request.aws     : AWS dynamodb.DescribeTable => 200\n2026-01-15T08:51:39.371  INFO --- [et.reactor-6] localstack.request.aws     : AWS dynamodb.DescribeTable => 200\n2026-01-15T08:51:39.379  INFO --- [et.reactor-0] localstack.request.aws     : AWS dynamodb.DescribeTable => 200\n2026-01-15T08:51:39.382  INFO --- [et.reactor-3] localstack.request.aws     : AWS dynamodb.DescribeContinuousBackups => 200\n2026-01-15T08:51:39.392  INFO --- [et.reactor-4] localstack.request.aws     : AWS dynamodb.DescribeTimeToLive => 200\n2026-01-15T08:51:39.394  INFO --- [et.reactor-1] localstack.request.aws     : AWS dynamodb.ListTagsOfResource => 200\n2026-01-15T08:51:44.054  INFO --- [et.reactor-5] localstack.request.aws     : AWS lambda.GetFunction => 200\n2026-01-15T08:51:44.267  INFO --- [et.reactor-6] localstack.request.aws     : AWS lambda.GetFunction => 200\n2026-01-15T08:51:44.682  INFO --- [et.reactor-3] localstack.request.aws     : AWS lambda.GetFunction => 200\n2026-01-15T08:51:45.494  INFO --- [et.reactor-4] localstack.request.aws     : AWS lambda.GetFunction => 200\n2026-01-15T08:51:47.106  INFO --- [et.reactor-2] localstack.request.aws     : AWS lambda.GetFunction => 200\n2026-01-15T08:51:50.315  INFO --- [et.reactor-1] localstack.request.aws     : AWS lambda.GetFunction => 200\n2026-01-15T08:51:50.323  INFO --- [et.reactor-5] localstack.request.aws     : AWS lambda.GetFunction => 200\n2026-01-15T08:51:50.325  INFO --- [et.reactor-6] localstack.request.aws     : AWS lambda.ListVersionsByFunction => 200\n2026-01-15T08:51:50.327  INFO --- [et.reactor-0] localstack.request.aws     : AWS lambda.GetFunctionCodeSigningConfig => 200\n",
  "error_message": null
}