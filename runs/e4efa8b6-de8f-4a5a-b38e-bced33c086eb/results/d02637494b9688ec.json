{
  "arch_hash": "d02637494b9688ec",
  "run_id": "e4efa8b6-de8f-4a5a-b38e-bced33c086eb",
  "status": "FAILED",
  "started_at": "2026-01-15T08:21:59.872733",
  "completed_at": "2026-01-15T08:22:24.118873",
  "duration_seconds": 24.246142,
  "terraform_apply": {
    "success": false,
    "resources_created": 0,
    "outputs": {},
    "logs": "Apply failed:\nSTDOUT: \u001b[0m\u001b[1mdata.archive_file.lambda_zip_file: Reading...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1mdata.archive_file.lambda_zip_file: Read complete after 0s [id=74356240e2aa7088b67521e31008fbacbb6b1f95]\u001b[0m\n\u001b[0m\u001b[1mdata.aws_iam_policy.lambda_basic_execution_role_policy: Reading...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1mdata.aws_iam_policy.lambda_basic_execution_role_policy: Read complete after 1s [id=arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole]\u001b[0m\n\nTerraform used the selected providers to generate the following execution\nplan. Resource actions are indicated with the following symbols:\n  \u001b[32m+\u001b[0m create\u001b[0m\n\nTerraform will perform the following actions:\n\n\u001b[1m  # aws_cloudwatch_event_rule.event_rule\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_cloudwatch_event_rule\" \"event_rule\" {\n      \u001b[32m+\u001b[0m\u001b[0m arn            = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m event_bus_name = \"default\"\n      \u001b[32m+\u001b[0m\u001b[0m event_pattern  = jsonencode(\n            {\n              \u001b[32m+\u001b[0m\u001b[0m detail      = {\n                  \u001b[32m+\u001b[0m\u001b[0m location = [\n                      \u001b[32m+\u001b[0m\u001b[0m {\n                          \u001b[32m+\u001b[0m\u001b[0m prefix = \"EUR-\"\n                        },\n                    ]\n                }\n              \u001b[32m+\u001b[0m\u001b[0m detail-type = [\n                  \u001b[32m+\u001b[0m\u001b[0m \"transaction\",\n                ]\n              \u001b[32m+\u001b[0m\u001b[0m source      = [\n                  \u001b[32m+\u001b[0m\u001b[0m \"custom.myApp\",\n                ]\n            }\n        )\n      \u001b[32m+\u001b[0m\u001b[0m force_destroy  = false\n      \u001b[32m+\u001b[0m\u001b[0m id             = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name_prefix    = \"eventbridge-lambda-\"\n      \u001b[32m+\u001b[0m\u001b[0m region         = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m tags_all       = (known after apply)\n    }\n\n\u001b[1m  # aws_cloudwatch_event_target.target_lambda_function\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_cloudwatch_event_target\" \"target_lambda_function\" {\n      \u001b[32m+\u001b[0m\u001b[0m arn            = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m event_bus_name = \"default\"\n      \u001b[32m+\u001b[0m\u001b[0m force_destroy  = false\n      \u001b[32m+\u001b[0m\u001b[0m id             = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m region         = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m rule           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m target_id      = (known after apply)\n    }\n\n\u001b[1m  # aws_iam_role.lambda_iam_role\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_iam_role\" \"lambda_iam_role\" {\n      \u001b[32m+\u001b[0m\u001b[0m arn                   = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m assume_role_policy    = jsonencode(\n            {\n              \u001b[32m+\u001b[0m\u001b[0m Statement = [\n                  \u001b[32m+\u001b[0m\u001b[0m {\n                      \u001b[32m+\u001b[0m\u001b[0m Action    = \"sts:AssumeRole\"\n                      \u001b[32m+\u001b[0m\u001b[0m Effect    = \"Allow\"\n                      \u001b[32m+\u001b[0m\u001b[0m Principal = {\n                          \u001b[32m+\u001b[0m\u001b[0m Service = \"lambda.amazonaws.com\"\n                        }\n                      \u001b[32m+\u001b[0m\u001b[0m Sid       = \"\"\n                    },\n                ]\n              \u001b[32m+\u001b[0m\u001b[0m Version   = \"2012-10-17\"\n            }\n        )\n      \u001b[32m+\u001b[0m\u001b[0m create_date           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m force_detach_policies = false\n      \u001b[32m+\u001b[0m\u001b[0m id                    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m managed_policy_arns   = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m max_session_duration  = 3600\n      \u001b[32m+\u001b[0m\u001b[0m name                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name_prefix           = \"EventBridgeLambdaRole-\"\n      \u001b[32m+\u001b[0m\u001b[0m path                  = \"/\"\n      \u001b[32m+\u001b[0m\u001b[0m tags_all              = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m unique_id             = (known after apply)\n    }\n\n\u001b[1m  # aws_iam_role_policy_attachment.lambda_basic_execution\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_iam_role_policy_attachment\" \"lambda_basic_execution\" {\n      \u001b[32m+\u001b[0m\u001b[0m id         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m policy_arn = \"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole\"\n      \u001b[32m+\u001b[0m\u001b[0m role       = (known after apply)\n    }\n\n\u001b[1m  # aws_lambda_function.lambda_function\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_lambda_function\" \"lambda_function\" {\n      \u001b[32m+\u001b[0m\u001b[0m architectures                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m arn                            = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m code_sha256                    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m filename                       = \"./lambda.zip\"\n      \u001b[32m+\u001b[0m\u001b[0m function_name                  = \"ConsumerFunction\"\n      \u001b[32m+\u001b[0m\u001b[0m handler                        = \"app.handler\"\n      \u001b[32m+\u001b[0m\u001b[0m id                             = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m invoke_arn                     = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m last_modified                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m memory_size                    = 128\n      \u001b[32m+\u001b[0m\u001b[0m package_type                   = \"Zip\"\n      \u001b[32m+\u001b[0m\u001b[0m publish                        = false\n      \u001b[32m+\u001b[0m\u001b[0m qualified_arn                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m qualified_invoke_arn           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m region                         = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m reserved_concurrent_executions = -1\n      \u001b[32m+\u001b[0m\u001b[0m response_streaming_invoke_arn  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m role                           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m runtime                        = \"nodejs24.x\"\n      \u001b[32m+\u001b[0m\u001b[0m signing_job_arn                = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m signing_profile_version_arn    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m skip_destroy                   = false\n      \u001b[32m+\u001b[0m\u001b[0m source_code_hash               = \"6fUG2MgdnDnJcHpGL3PWGVn+aMAP62dYzodTBT/nK4E=\"\n      \u001b[32m+\u001b[0m\u001b[0m source_code_size               = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m tags_all                       = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m timeout                        = 3\n      \u001b[32m+\u001b[0m\u001b[0m version                        = (known after apply)\n    }\n\n\u001b[1m  # aws_lambda_permission.allow_cloudwatch\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_lambda_permission\" \"allow_cloudwatch\" {\n      \u001b[32m+\u001b[0m\u001b[0m action              = \"lambda:InvokeFunction\"\n      \u001b[32m+\u001b[0m\u001b[0m function_name       = \"ConsumerFunction\"\n      \u001b[32m+\u001b[0m\u001b[0m id                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m principal           = \"events.amazonaws.com\"\n      \u001b[32m+\u001b[0m\u001b[0m region              = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m source_arn          = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m statement_id        = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m statement_id_prefix = (known after apply)\n    }\n\n\u001b[1mPlan:\u001b[0m 6 to add, 0 to change, 0 to destroy.\n\u001b[0m\nChanges to Outputs:\n  \u001b[32m+\u001b[0m\u001b[0m ConsumerFunction = (known after apply)\n\u001b[0m\u001b[1maws_cloudwatch_event_rule.event_rule: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_iam_role.lambda_iam_role: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_iam_role.lambda_iam_role: Creation complete after 0s [id=EventBridgeLambdaRole-20260115082218414200000002]\u001b[0m\n\u001b[0m\u001b[1maws_iam_role_policy_attachment.lambda_basic_execution: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_lambda_function.lambda_function: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_iam_role_policy_attachment.lambda_basic_execution: Creation complete after 0s [id=EventBridgeLambdaRole-20260115082218414200000002/arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole]\u001b[0m\n\u001b[31m\u2577\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[1m\u001b[31mError: \u001b[0m\u001b[0m\u001b[1mwaiting for Lambda Function (ConsumerFunction) create: unexpected state 'Failed', wanted target 'Active, ActiveNonInvocable'. last error: InternalError: Error while creating lambda: Docker not available\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[0m  with aws_lambda_function.lambda_function,\n\u001b[31m\u2502\u001b[0m \u001b[0m  on main.tf line 16, in resource \"aws_lambda_function\" \"lambda_function\":\n\u001b[31m\u2502\u001b[0m \u001b[0m  16: resource \"aws_lambda_function\" \"lambda_function\" \u001b[4m{\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2575\u001b[0m\u001b[0m\n\u001b[31m\u2577\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[1m\u001b[31mError: \u001b[0m\u001b[0m\u001b[1mMissing Resource Identity After Create: The Terraform provider unexpectedly returned no resource identity after having no errors in the resource create. This is always a problem with the provider and should be reported to the provider developer\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[0m  with aws_lambda_function.lambda_function,\n\u001b[31m\u2502\u001b[0m \u001b[0m  on main.tf line 16, in resource \"aws_lambda_function\" \"lambda_function\":\n\u001b[31m\u2502\u001b[0m \u001b[0m  16: resource \"aws_lambda_function\" \"lambda_function\" \u001b[4m{\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2575\u001b[0m\u001b[0m\n\u001b[31m\u2577\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[1m\u001b[31mError: \u001b[0m\u001b[0m\u001b[1mcreating EventBridge Rule (eventbridge-lambda-20260115082218413800000001): operation error EventBridge: PutRule, https response error StatusCode: 501, RequestID: 16ae32e2-f140-4684-b590-0af72ff66abb, api error InternalFailure: Service 'events' is not enabled. Please check your 'SERVICES' configuration variable.\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[0m  with aws_cloudwatch_event_rule.event_rule,\n\u001b[31m\u2502\u001b[0m \u001b[0m  on main.tf line 60, in resource \"aws_cloudwatch_event_rule\" \"event_rule\":\n\u001b[31m\u2502\u001b[0m \u001b[0m  60: resource \"aws_cloudwatch_event_rule\" \"event_rule\" \u001b[4m{\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2575\u001b[0m\u001b[0m\n::error::Terraform exited with code 1.\n\nSTDERR: "
  },
  "pytest_results": null,
  "container_logs": "\nLocalStack version: 4.12.1.dev67\nLocalStack build date: 2026-01-15\nLocalStack build git hash: d7217cca7\n\nReady.\n2026-01-15T08:22:14.999  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.GetUser => 200\n2026-01-15T08:22:15.109  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.148  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.186  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.224  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.261  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.297  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.332  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.368  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.404  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.442  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.478  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.528  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.572  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.636  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.660  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.ListPolicies => 200\n2026-01-15T08:22:15.666  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.GetPolicy => 200\n2026-01-15T08:22:15.670  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.GetPolicyVersion => 200\n2026-01-15T08:22:18.362  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.GetUser => 200\n2026-01-15T08:22:18.419  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.CreateRole => 200\n2026-01-15T08:22:18.423  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.GetRole => 200\n2026-01-15T08:22:18.430  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.ListRolePolicies => 200\n2026-01-15T08:22:18.431 ERROR --- [et.reactor-1] l.aws.handlers.logging     : exception during call chain: Service 'events' is not enabled. Please check your 'SERVICES' configuration variable.\n2026-01-15T08:22:18.431  INFO --- [et.reactor-1] l.aws.handlers.service     : Service 'events' is not enabled. Please check your 'SERVICES' configuration variable.\n2026-01-15T08:22:18.432  INFO --- [et.reactor-1] localstack.request.aws     : AWS events.PutRule => 501 (InternalFailure)\n2026-01-15T08:22:18.435  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.ListAttachedRolePolicies => 200\n2026-01-15T08:22:18.445  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.AttachRolePolicy => 200\n2026-01-15T08:22:18.449  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.ListAttachedRolePolicies => 200\n2026-01-15T08:22:18.614  WARN --- [et.reactor-1] l.s.l.i.docker_runtime_exe : WARNING: Docker not available in the LocalStack container but required to run Lambda functions. Please add the Docker volume mount \"/var/run/docker.sock:/var/run/docker.sock\" to your LocalStack startup. https://docs.localstack.cloud/user-guide/aws/lambda/#docker-not-available\n2026-01-15T08:22:18.919  INFO --- [et.reactor-1] localstack.request.aws     : AWS lambda.CreateFunction => 201\n2026-01-15T08:22:18.968 ERROR --- [rvice-task_0] l.services.lambda_.hints   : Failed to pull Docker image because Docker is not available in the LocalStack container but required to run Lambda functions. Please add the Docker volume mount \"/var/run/docker.sock:/var/run/docker.sock\" to your LocalStack startup. https://docs.localstack.cloud/user-guide/aws/lambda/#docker-not-available\n2026-01-15T08:22:19.031  INFO --- [et.reactor-1] localstack.request.aws     : AWS lambda.GetFunction => 200\n2026-01-15T08:22:24.055  INFO --- [et.reactor-1] localstack.request.aws     : AWS lambda.GetFunction => 200\n",
  "error_message": null
}