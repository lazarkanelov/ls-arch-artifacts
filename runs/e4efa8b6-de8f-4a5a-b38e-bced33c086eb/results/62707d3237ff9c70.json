{
  "arch_hash": "62707d3237ff9c70",
  "run_id": "e4efa8b6-de8f-4a5a-b38e-bced33c086eb",
  "status": "FAILED",
  "started_at": "2026-01-15T08:22:50.561292",
  "completed_at": "2026-01-15T08:23:16.419983",
  "duration_seconds": 25.858694,
  "terraform_apply": {
    "success": false,
    "resources_created": 0,
    "outputs": {},
    "logs": "Apply failed:\nSTDOUT: \u001b[0m\u001b[1mdata.archive_file.lambda_zip_file: Reading...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1mdata.archive_file.lambda_zip_file: Read complete after 0s [id=b6014d37ac447a0689cef34ed47f740e57ba0381]\u001b[0m\n\nTerraform used the selected providers to generate the following execution\nplan. Resource actions are indicated with the following symbols:\n  \u001b[32m+\u001b[0m create\u001b[0m\n\nTerraform will perform the following actions:\n\n\u001b[1m  # aws_dynamodb_table.dynamodb_table_users\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_dynamodb_table\" \"dynamodb_table_users\" {\n      \u001b[32m+\u001b[0m\u001b[0m arn              = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m billing_mode     = \"PROVISIONED\"\n      \u001b[32m+\u001b[0m\u001b[0m hash_key         = \"UserId\"\n      \u001b[32m+\u001b[0m\u001b[0m id               = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name             = \"UsersIds\"\n      \u001b[32m+\u001b[0m\u001b[0m read_capacity    = 5\n      \u001b[32m+\u001b[0m\u001b[0m region           = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m stream_arn       = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m stream_enabled   = true\n      \u001b[32m+\u001b[0m\u001b[0m stream_label     = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m stream_view_type = \"NEW_AND_OLD_IMAGES\"\n      \u001b[32m+\u001b[0m\u001b[0m tags             = {\n          \u001b[32m+\u001b[0m\u001b[0m \"Environment\" = \"dev\"\n          \u001b[32m+\u001b[0m\u001b[0m \"Name\"        = \"dynamodb-test-table\"\n        }\n      \u001b[32m+\u001b[0m\u001b[0m tags_all         = {\n          \u001b[32m+\u001b[0m\u001b[0m \"Environment\" = \"dev\"\n          \u001b[32m+\u001b[0m\u001b[0m \"Name\"        = \"dynamodb-test-table\"\n        }\n      \u001b[32m+\u001b[0m\u001b[0m write_capacity   = 5\n\n      \u001b[32m+\u001b[0m\u001b[0m attribute {\n          \u001b[32m+\u001b[0m\u001b[0m name = \"UserId\"\n          \u001b[32m+\u001b[0m\u001b[0m type = \"S\"\n        }\n    }\n\n\u001b[1m  # aws_iam_role.iam_for_lambda\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_iam_role\" \"iam_for_lambda\" {\n      \u001b[32m+\u001b[0m\u001b[0m arn                   = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m assume_role_policy    = jsonencode(\n            {\n              \u001b[32m+\u001b[0m\u001b[0m Statement = [\n                  \u001b[32m+\u001b[0m\u001b[0m {\n                      \u001b[32m+\u001b[0m\u001b[0m Action    = \"sts:AssumeRole\"\n                      \u001b[32m+\u001b[0m\u001b[0m Effect    = \"Allow\"\n                      \u001b[32m+\u001b[0m\u001b[0m Principal = {\n                          \u001b[32m+\u001b[0m\u001b[0m Service = \"lambda.amazonaws.com\"\n                        }\n                      \u001b[32m+\u001b[0m\u001b[0m Sid       = \"\"\n                    },\n                ]\n              \u001b[32m+\u001b[0m\u001b[0m Version   = \"2012-10-17\"\n            }\n        )\n      \u001b[32m+\u001b[0m\u001b[0m create_date           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m force_detach_policies = false\n      \u001b[32m+\u001b[0m\u001b[0m id                    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m managed_policy_arns   = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m max_session_duration  = 3600\n      \u001b[32m+\u001b[0m\u001b[0m name                  = \"iam_for_lambda\"\n      \u001b[32m+\u001b[0m\u001b[0m name_prefix           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m path                  = \"/\"\n      \u001b[32m+\u001b[0m\u001b[0m tags_all              = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m unique_id             = (known after apply)\n    }\n\n\u001b[1m  # aws_iam_role_policy.dynamodb_lambda_policy\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_iam_role_policy\" \"dynamodb_lambda_policy\" {\n      \u001b[32m+\u001b[0m\u001b[0m id          = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m name        = \"lambda-dynamodb-policy\"\n      \u001b[32m+\u001b[0m\u001b[0m name_prefix = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m policy      = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m role        = (known after apply)\n    }\n\n\u001b[1m  # aws_lambda_event_source_mapping.lambda_dynamodb\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_lambda_event_source_mapping\" \"lambda_dynamodb\" {\n      \u001b[32m+\u001b[0m\u001b[0m arn                           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m enabled                       = true\n      \u001b[32m+\u001b[0m\u001b[0m event_source_arn              = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m function_arn                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m function_name                 = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m id                            = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m last_modified                 = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m last_processing_result        = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m maximum_record_age_in_seconds = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m maximum_retry_attempts        = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m parallelization_factor        = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m region                        = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m starting_position             = \"LATEST\"\n      \u001b[32m+\u001b[0m\u001b[0m state                         = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m state_transition_reason       = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m tags_all                      = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m uuid                          = (known after apply)\n    }\n\n\u001b[1m  # aws_lambda_function.lambda_dynamodb_stream_handler\u001b[0m will be created\n\u001b[0m  \u001b[32m+\u001b[0m\u001b[0m resource \"aws_lambda_function\" \"lambda_dynamodb_stream_handler\" {\n      \u001b[32m+\u001b[0m\u001b[0m architectures                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m arn                            = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m code_sha256                    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m filename                       = \"./lambda.zip\"\n      \u001b[32m+\u001b[0m\u001b[0m function_name                  = \"process-usersids-records\"\n      \u001b[32m+\u001b[0m\u001b[0m handler                        = \"index.handler\"\n      \u001b[32m+\u001b[0m\u001b[0m id                             = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m invoke_arn                     = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m last_modified                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m memory_size                    = 128\n      \u001b[32m+\u001b[0m\u001b[0m package_type                   = \"Zip\"\n      \u001b[32m+\u001b[0m\u001b[0m publish                        = false\n      \u001b[32m+\u001b[0m\u001b[0m qualified_arn                  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m qualified_invoke_arn           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m region                         = \"us-east-1\"\n      \u001b[32m+\u001b[0m\u001b[0m reserved_concurrent_executions = -1\n      \u001b[32m+\u001b[0m\u001b[0m response_streaming_invoke_arn  = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m role                           = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m runtime                        = \"nodejs24.x\"\n      \u001b[32m+\u001b[0m\u001b[0m signing_job_arn                = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m signing_profile_version_arn    = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m skip_destroy                   = false\n      \u001b[32m+\u001b[0m\u001b[0m source_code_hash               = \"XFSsPWNxmU8LUiofQVmvljvIxktb6M0fg1Hjpz6SuF0=\"\n      \u001b[32m+\u001b[0m\u001b[0m source_code_size               = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m tags_all                       = (known after apply)\n      \u001b[32m+\u001b[0m\u001b[0m timeout                        = 3\n      \u001b[32m+\u001b[0m\u001b[0m version                        = (known after apply)\n    }\n\n\u001b[1mPlan:\u001b[0m 5 to add, 0 to change, 0 to destroy.\n\u001b[0m\nChanges to Outputs:\n  \u001b[32m+\u001b[0m\u001b[0m dynamodb_usersIds_arn = (known after apply)\n  \u001b[32m+\u001b[0m\u001b[0m lambda_processing_arn = (known after apply)\n\u001b[0m\u001b[1maws_iam_role.iam_for_lambda: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_dynamodb_table.dynamodb_table_users: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_iam_role.iam_for_lambda: Creation complete after 0s [id=iam_for_lambda]\u001b[0m\n\u001b[0m\u001b[1maws_lambda_function.lambda_dynamodb_stream_handler: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_dynamodb_table.dynamodb_table_users: Creation complete after 4s [id=UsersIds]\u001b[0m\n\u001b[0m\u001b[1maws_iam_role_policy.dynamodb_lambda_policy: Creating...\u001b[0m\u001b[0m\n\u001b[0m\u001b[1maws_iam_role_policy.dynamodb_lambda_policy: Creation complete after 0s [id=iam_for_lambda:lambda-dynamodb-policy]\u001b[0m\n\u001b[31m\u2577\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[1m\u001b[31mError: \u001b[0m\u001b[0m\u001b[1mwaiting for Lambda Function (process-usersids-records) create: unexpected state 'Failed', wanted target 'Active, ActiveNonInvocable'. last error: InternalError: Error while creating lambda: Docker not available\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[0m  with aws_lambda_function.lambda_dynamodb_stream_handler,\n\u001b[31m\u2502\u001b[0m \u001b[0m  on main.tf line 36, in resource \"aws_lambda_function\" \"lambda_dynamodb_stream_handler\":\n\u001b[31m\u2502\u001b[0m \u001b[0m  36: resource \"aws_lambda_function\" \"lambda_dynamodb_stream_handler\" \u001b[4m{\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2575\u001b[0m\u001b[0m\n\u001b[31m\u2577\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[1m\u001b[31mError: \u001b[0m\u001b[0m\u001b[1mMissing Resource Identity After Create: The Terraform provider unexpectedly returned no resource identity after having no errors in the resource create. This is always a problem with the provider and should be reported to the provider developer\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\u001b[0m  with aws_lambda_function.lambda_dynamodb_stream_handler,\n\u001b[31m\u2502\u001b[0m \u001b[0m  on main.tf line 36, in resource \"aws_lambda_function\" \"lambda_dynamodb_stream_handler\":\n\u001b[31m\u2502\u001b[0m \u001b[0m  36: resource \"aws_lambda_function\" \"lambda_dynamodb_stream_handler\" \u001b[4m{\u001b[0m\u001b[0m\n\u001b[31m\u2502\u001b[0m \u001b[0m\n\u001b[31m\u2575\u001b[0m\u001b[0m\n::error::Terraform exited with code 1.\n\nSTDERR: "
  },
  "pytest_results": null,
  "container_logs": "re\" took 1880.80ms\n2026-01-15T08:23:07.847  INFO --- [et.reactor-1] localstack.request.aws     : AWS dynamodb.DescribeTable => 400 (ResourceNotFoundException)\n2026-01-15T08:23:10.416  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.GetUser => 200\n2026-01-15T08:23:10.480  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.CreateRole => 200\n2026-01-15T08:23:10.486  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.GetRole => 200\n2026-01-15T08:23:10.486  INFO --- [et.reactor-1] localstack.request.aws     : AWS dynamodb.DescribeTable => 400 (ResourceNotFoundException)\n2026-01-15T08:23:10.491  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.ListRolePolicies => 200\n2026-01-15T08:23:10.495  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.ListAttachedRolePolicies => 200\n2026-01-15T08:23:10.679  WARN --- [et.reactor-1] l.s.l.i.docker_runtime_exe : WARNING: Docker not available in the LocalStack container but required to run Lambda functions. Please add the Docker volume mount \"/var/run/docker.sock:/var/run/docker.sock\" to your LocalStack startup. https://docs.localstack.cloud/user-guide/aws/lambda/#docker-not-available\n2026-01-15T08:23:11.186  INFO --- [et.reactor-2] l.s.k.kinesis_mock_server  : Creating kinesis backend for account 000000000000\n2026-01-15T08:23:11.187  INFO --- [et.reactor-1] localstack.request.aws     : AWS lambda.CreateFunction => 201\n2026-01-15T08:23:11.250 ERROR --- [rvice-task_0] l.services.lambda_.hints   : Failed to pull Docker image because Docker is not available in the LocalStack container but required to run Lambda functions. Please add the Docker volume mount \"/var/run/docker.sock:/var/run/docker.sock\" to your LocalStack startup. https://docs.localstack.cloud/user-guide/aws/lambda/#docker-not-available\n2026-01-15T08:23:11.326  INFO --- [et.reactor-1] localstack.request.aws     : AWS lambda.GetFunction => 200\n2026-01-15T08:23:12.190  INFO --- [-functhread5] l.s.k.kinesis_mock_server  : [info] kinesis.mock.KinesisMockService$ 2026-01-15T08:23:12.181717Z contextId=27186448-7e67-4934-855d-2ece5847c302, cacheConfig={\"awsAccountId\":\"000000000000\",\"awsRegion\":\"us-east-1\",\"createStreamDuration\":{\"length\":500,\"unit\":\"MILLISECONDS\"},\"deleteStreamDuration\":{\"length\":500,\"unit\":\"MILLISECONDS\"},\"deregisterStreamConsumerDuration\":{\"length\":500,\"unit\":\"MILLISECONDS\"},\"initializeStreams\":null,\"logLevel\":\"INFO\",\"mergeShardsDuration\":{\"length\":500,\"unit\":\"MILLISECONDS\"},\"onDemandStreamCountLimit\":10,\"persistConfig\":{\"fileName\":\"000000000000.json\",\"interval\":{\"length\":5,\"unit\":\"SECONDS\"},\"loadIfExists\":true,\"path\":\"/tmp/localstack/state/kinesis\",\"shouldPersist\":true},\"registerStreamConsumerDuration\":{\"length\":500,\"unit\":\"MILLISECONDS\"},\"shardLimit\":100,\"splitShardDuration\":{\"length\":500,\"unit\":\"MILLISECONDS\"},\"startStreamEncryptionDuration\":{\"length\":500,\"unit\":\"MILLISECONDS\"},\"stopStreamEncryptionDuration\":{\"length\":500,\"unit\":\"MILLISECONDS\"},\"updateShardCountDuration\":{\"length\":500,\"unit\":\"MILLISECONDS\"}} Logging Cache Config\n2026-01-15T08:23:12.278  INFO --- [-functhread5] l.s.k.kinesis_mock_server  : [info] kinesis.mock.KinesisMockService$ 2026-01-15T08:23:12.277956Z  Starting Kinesis TLS Mock Service on port 57481\n2026-01-15T08:23:12.278  INFO --- [-functhread5] l.s.k.kinesis_mock_server  : [info] kinesis.mock.KinesisMockService$ 2026-01-15T08:23:12.278444Z  Starting Kinesis Plain Mock Service on port 53915\n2026-01-15T08:23:12.284  INFO --- [-functhread5] l.s.k.kinesis_mock_server  : [info] kinesis.mock.KinesisMockService$ 2026-01-15T08:23:12.284120Z contextId=a76cbbe5-e6c0-43f8-bf90-ea6579d31241 Starting persist data loop\n2026-01-15T08:23:12.599  INFO --- [et.reactor-0] localstack.request.aws     : AWS dynamodb.CreateTable => 200\n2026-01-15T08:23:12.615  INFO --- [et.reactor-2] localstack.request.aws     : AWS dynamodb.DescribeTable => 200\n2026-01-15T08:23:13.624  INFO --- [et.reactor-0] localstack.request.aws     : AWS dynamodb.DescribeTable => 200\n2026-01-15T08:23:13.632  INFO --- [et.reactor-1] localstack.request.aws     : AWS dynamodb.DescribeTable => 200\n2026-01-15T08:23:13.639  INFO --- [et.reactor-3] localstack.request.aws     : AWS dynamodb.DescribeTable => 200\n2026-01-15T08:23:13.641  INFO --- [et.reactor-2] localstack.request.aws     : AWS dynamodb.DescribeContinuousBackups => 200\n2026-01-15T08:23:13.650  INFO --- [et.reactor-0] localstack.request.aws     : AWS dynamodb.DescribeTimeToLive => 200\n2026-01-15T08:23:13.652  INFO --- [et.reactor-3] localstack.request.aws     : AWS dynamodb.ListTagsOfResource => 200\n2026-01-15T08:23:13.664  INFO --- [et.reactor-2] localstack.request.aws     : AWS iam.PutRolePolicy => 200\n2026-01-15T08:23:13.667  INFO --- [et.reactor-0] localstack.request.aws     : AWS iam.GetRolePolicy => 200\n2026-01-15T08:23:13.669  INFO --- [et.reactor-1] localstack.request.aws     : AWS iam.GetRolePolicy => 200\n2026-01-15T08:23:16.348  INFO --- [et.reactor-3] localstack.request.aws     : AWS lambda.GetFunction => 200\n",
  "error_message": null
}